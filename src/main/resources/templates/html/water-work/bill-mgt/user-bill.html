<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" id="cust">
	<head>
		<meta charset="utf-8">
		<title>水费业务 / 账单管理-账单列表</title>
		<link rel="stylesheet" href="../../../../static/css/layui.css" media="all">
		<link rel="stylesheet" type="text/css" href="../../../../static/css/common.css" />
		<link rel="stylesheet" type="text/css" href="../../../ztree/zTreeStyle/zTreeStyle.css" />
		<style>
			.payAfter{display: none;}
		</style>
	</head>
	<body class="inner-body layui-row layui-col-space10" style="background:#f2f2f2;position: relative; ">
		<div class="body-left treeDiv">
			<ul id="treeDemo" class="ztree"></ul>
		</div>
		<!-------默认表格开始----------->
		<div class="body-right" style="overflow-y: auto;">
			<div class="tableHtml" style="background: #FFFFFF; min-width: 1000px; padding-bottom: 20px;">
				<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
				  <legend>用户信息</legend>
				</fieldset>
				<form class="layui-form layui-form-pane ml30" action="" style="width: ;margin-top: 20px;" lay-filter="">
					<div class="layui-form-item">
						<div class="layui-inline">
							<label class="layui-form-label">户号</label>
							<div class="layui-input-inline">
								<input name="" class="layui-input"  type="text" lay-verify="required" placeholder="请输入" autocomplete="off" value="00001" disabled="">
							</div>
						</div>
						<div class="layui-inline">
							<label class="layui-form-label">姓名</label>
							<div class="layui-input-inline">
								<input name="" class="layui-input"  type="text" lay-verify="required" placeholder="请输入" autocomplete="off" value="李晓" disabled="">
							</div>
						</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-inline">
							<label class="layui-form-label">身份证号</label>
							<div class="layui-input-inline">
								<input name="" class="layui-input"  type="text" lay-verify="required" placeholder="请输入" autocomplete="off" value="320543198711114321" disabled="">
							</div>
						</div>
						<div class="layui-inline">
							<label class="layui-form-label">联系电话</label>
							<div class="layui-input-inline">
								<input name="" class="layui-input"  type="text" lay-verify="required" placeholder="请输入" autocomplete="off" value="13112321232" disabled="">
							</div>
						</div>
						<div class="layui-inline">
							<label class="layui-form-label">用户类型</label>
							<div class="layui-input-inline">
								<input name="" class="layui-input"  type="text" lay-verify="required" placeholder="请输入" autocomplete="off" value="居民用水" disabled="">
							</div>
						</div>
						<div class="layui-inline">
							<label class="layui-form-label">装表类型</label>
							<div class="layui-input-inline">
								<input name="" class="layui-input"  type="text" lay-verify="required" placeholder="请输入" autocomplete="off" value="物联网水表" disabled="">
							</div>
						</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-inline">
							<label class="layui-form-label">开户日期</label>
							<div class="layui-input-inline">
								<input name="" class="layui-input"  type="text" lay-verify="required" placeholder="请输入" autocomplete="off" value="20191114" disabled="">
							</div>
						</div>
						<div class="layui-inline">
							<label class="layui-form-label">付费模式</label>
							<div class="layui-input-inline">
								<input name="" class="layui-input"  type="text" lay-verify="required" placeholder="请输入" autocomplete="off" value="后付费" disabled="">
							</div>
						</div>
						<div class="layui-inline">
							<label class="layui-form-label">水价名称</label>
							<div class="layui-input-inline">
								<input name="" class="layui-input"  type="text" lay-verify="required" placeholder="请输入" autocomplete="off" value="金色家园居民用水" disabled="">
							</div>
						</div>
						<div class="layui-inline">
							<label class="layui-form-label">地址</label>
							<div class="layui-input-inline">
								<input name="" class="layui-input"  type="text" lay-verify="required" placeholder="请输入" autocomplete="off" value="合肥市瑶海区金色家园1栋101室" disabled="">
							</div>
						</div>
					</div>				
				</form>
				
				<!-- 后付费开始 -->
				<div class="payAfter">
					<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;  margin-bottom: 0px;">
					  <legend>账单列表</legend>
					</fieldset>
					<!-- <div class="top-btn">
						
						<div class="search-btn-group layui-form">
							<button type="button" class="layui-btn layui-btn-sm layui-btn-primary" title="更多">
							  <i class="layui-icon">&#xe602;</i>
							</button>
						</div>
					</div> -->
					<div class="tableDiv">
						<table id="layui-table" lay-filter="tableBox" class="layui-table"></table>
					</div>
				</div>
				<!-- 后付费结束 -->
				
				<!-- 预付费开始 -->
				<div class="payPre">
					<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;  margin-bottom: 0px;">
					  <legend>订单列表</legend>
					</fieldset>
					<!-- <div class="top-btn" style="margin-top: 20px;">
						<div class="layui-btn-group">
							<button class="layui-btn" id="orderBtn">创建订单</button>
						</div>
						<div class="search-btn-group layui-form">
							<button type="button" class="layui-btn layui-btn-sm layui-btn-primary" title="更多">
							  <i class="layui-icon">&#xe602;</i>
							</button>
						</div>
					</div> -->
					<div class="tableDiv">
						<table id="layui-table2" lay-filter="tableBox2" class="layui-table"></table>
					</div>
				</div>
				<!-- 预付费结束 -->
				
			</div>
		</div>

		<!-----------------默认表格结束------------>

	</body>
	<script type="text/html" id="barDemo">
	    {{# if(d.billstate == "已逾期" || d.billstate == "已出账"){ }}
	    <a class="layui-btn layui-btn-xs" lay-event="choose">选择</a>
	    {{# } }}
	    {{# if(d.billstate == "已清账"){ }}
		<a class="layui-btn layui-btn-xs" lay-event="billLook">查看</a>
	    {{# } }}
		<a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
	</script>
	<script type="text/html" id="barDemo2">
	    {{# if(d.orderstate == "编辑中" || d.orderstate == "待支付"){ }}
	    <a class="layui-btn layui-btn-xs layui-btn-warm" lay-event="edit2">编辑</a>
	    {{# } }}
	    {{# if(d.orderstate == "已支付"){ }}
	    <a class="layui-btn layui-btn-xs " lay-event="orderLook">查看</a>
	    {{# } }}
		<a class="layui-btn layui-btn-xs" lay-event="cancel">取消订单</a>
	</script>
	<script src='../../../../static/layui.all.js'></script>
	<script src="../../../../static/js/common.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../../../static/js/jquery-1.4.4.min.js" type="text/javascript"></script>
	<script src="../../../ztree/jquery.ztree.all.js" type="text/javascript"></script>
	<script type="text/javascript">
		var setting = {};
		var zNodes = [{
				name: "安徽省",
				open: true,
				children: [{
						name: "合肥市",
						open: true,
						children: [{
								name: "瑶海区"
							},
							{
								name: "包河区"
							},
							{
								name: "蜀山区"
							},
							{
								name: "庐阳区"
							},
							{
								name: "肥西县"
							},
							{
								name: "肥东县"
							},
							{
								name: "长丰县"
							},
							{
								name: "庐江县"
							},
						]
					},
					{
						name: "安庆市",
						open: true,
						children: [{
								name: "大观区"
							},
							{
								name: "迎江区"
							},
							{
								name: "宜秀区"
							},
							{
								name: "怀宁县"
							},
							{
								name: "岳西县"
							},
							{
								name: "潜山市"
							},
							{
								name: "望江县"
							},
							{
								name: "桐城市"
							}
						]
					},
					{
						name: "六安市",
						open: true,
						children: [{
								name: "裕安区"
							},
							{
								name: "金安区"
							},
							{
								name: "舒城县"
							},
							{
								name: "霍山县"
							},
							{
								name: "霍邱县"
							},
							{
								name: "金寨县"
							},

						]
					}

				],

			},

		];

		$(document).ready(function() {
			$.fn.zTree.init($("#treeDemo"), setting, zNodes);
		});
		//主动加载jquery模块
		layui.use(['jquery', 'layer','form'], function() {
			var $ = layui.jquery //重点处
				,
				layer = layui.layer,
				laydate = layui.laydate;
			var form = layui.form;
			//得到父页面的值
			var id = (window.parent.id_);
			console.log(id);
			
			//时间
			laydate.render({
				elem: '#date1',
				//value: new Date()
			});
			laydate.render({
				elem: '#date2',
				//value: new Date()
			});
			table = layui.table; //表格，注意此处table必须是全局变量
			$(".treeDiv").height($('.body-right').height() - 4); //树高度
			//后付费表头
			var arr = [
				[ {
						field: 'number',
						title: '账单号'
					}, {
						field: 'month',
						title: '使用月份',
						width: 100
					}, {
						field: 'water',
						title: '用水量（吨）'
					}, {
						field: 'water',
						title: '累计水量（吨）'
					}, {
						field: 'times',
						title: '抄表日期'
					}, {
						field: 'yhlx',
						title: '水价名称'
					}, {
						field: 'guawater',
						title: '保底水价'
					}, {
						field: 'billstate',
						title: '账单状态'
					}, {
						field: 'mph',
						title: '上期账户结余'
					}, {
						field: 'mph',
						title: '违约金'
					}
					,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:200}
				]
			];
			var limitArr = [10, 20, 30];
			var urls = '../../../tableJson.js';
			com.tableRender('#layui-table', 'tableId', 'full-320', limitArr, urls, arr); //加载表格,注意tableId是自定义的，在表格重载需要！！
			//预付费表头
			var arr2 = [
				[ {
						field: 'number',
						title: '订单号'
					}, {
						field: 'times',
						title: '创建时间',
						width: 100
					}, {
						field: 'mph',
						title: '充值金额（元）'
					}, {
						field: 'water',
						title: '购入水量（吨）'
					}, {
						field: 'sjname',
						title: '水价名称'
					},{
						field: 'watercom',
						title: '水费组成'
					}, {
						field: 'guawater',
						title: '保底水费'
					}, {
						field: 'orderstate',
						title: '订单状态'
					}, {
						field: 'mph',
						title: '当前余额（元）'
					}, {
						field: 'mph',
						title: '当前剩余水量（吨）'
					}
					,{fixed: 'right', title:'操作', toolbar: '#barDemo2', width:200}
				]
			];
			
			com.tableRender('#layui-table2', 'tableId2', 'full-320', limitArr, urls, arr2); //加载表格,注意tableId是自定义的，在表格重载需要！！															
						      
			table.on('tool(tableBox)', function(obj){
				console.log(obj)
			    var data = obj.data;
				if(obj.event=='billLook'){//账单详情
					com.pageOpen("账单详情","html/water-work/bill-mgt/bill-detail.html",['900px', '650px']);
				}
			});
			
			table.on('tool(tableBox2)', function(obj){
				console.log(obj)
			    var data = obj.data;
				if(obj.event=='orderLook'){//订单详情
					com.pageOpen("订单详情","html/water-work/bill-mgt/order-detail.html",['900px', '650px']);
				}
			});





		})
	</script>



</html>
